{% extends "base.html" %}

{% block title %}Set Theory - Discrete Math Calculator{% endblock %}

{% block content %}
<div class="container py-5">
    <div id="namedSetsSidebar" class="mb-4" aria-label="Named Sets and Universes Sidebar"></div>
    <div class="text-center mb-5">
        <h1 class="display-5 fw-bold">Set Theory Calculator</h1>
        <p class="lead">Perform advanced set operations, properties, relations, and visualizations</p>
    </div>
    <form id="setOperationsForm" class="mb-4" autocomplete="off">
        <div class="row g-3 align-items-end">
            <div class="col-md-4">
                        <label for="setA" class="form-label">Set A</label>
                <input type="text" class="form-control" id="setA" name="setA" placeholder="e.g. 1,2,3 or {x | x in 1..5}" aria-label="Set A">
                    </div>
            <div class="col-md-4">
                        <label for="setB" class="form-label">Set B</label>
                <input type="text" class="form-control" id="setB" name="setB" placeholder="e.g. 2,3,4" aria-label="Set B">
            </div>
            <div class="col-md-4">
                <label for="universe" class="form-label">Universe</label>
                <input type="text" class="form-control" id="universe" name="universe" placeholder="e.g. 1..10 or U" aria-label="Universe">
                    </div>
                </div>
        <div class="d-flex flex-wrap gap-2 mt-3">
            <button type="button" class="btn btn-outline-primary" data-operation="union">A ‚à™ B</button>
            <button type="button" class="btn btn-outline-primary" data-operation="intersection">A ‚à© B</button>
            <button type="button" class="btn btn-outline-primary" data-operation="difference">A \ B</button>
            <button type="button" class="btn btn-outline-primary" data-operation="symmetric">A ‚ñ≥ B</button>
            <button type="button" class="btn btn-outline-primary" data-operation="complement">A<sup>c</sup></button>
            <button type="button" class="btn btn-outline-primary" data-operation="cartesian">A √ó B</button>
            <button type="button" class="btn btn-outline-primary" data-operation="power">ùí´(A)</button>
            <button type="button" class="btn btn-outline-secondary reset-btn" data-reset="setOperationsForm">Reset</button>
                </div>
                <div class="result-container card border-2 border-primary-subtle shadow-sm p-3 mb-3 visually-hidden" tabindex="0" aria-live="polite">
                    <div class="math-display text-center fs-4 mb-3"></div>
                    <div id="vennDiagram" class="w-100" style="height: 320px;"></div>
            <div class="explanation-box" style="margin-top:1rem;"></div>
                </div>
            </form>
    <form id="setPropertiesForm" class="mb-4" autocomplete="off">
        <div class="row g-3 align-items-end">
            <div class="col-md-4">
                <label for="setC" class="form-label">Set</label>
                <input type="text" class="form-control" id="setC" name="setC" placeholder="e.g. 1,2,3 or N" aria-label="Set">
            </div>
        </div>
        <div class="d-flex flex-wrap gap-2 mt-3">
            <button type="button" class="btn btn-outline-success" data-property="empty">Empty?</button>
            <button type="button" class="btn btn-outline-success" data-property="finite">Finite?</button>
            <button type="button" class="btn btn-outline-success" data-property="infinite">Infinite?</button>
            <button type="button" class="btn btn-outline-success" data-property="cardinality">Cardinality</button>
            <button type="button" class="btn btn-outline-secondary reset-btn" data-reset="setPropertiesForm">Reset</button>
                </div>
                <div class="result-container card border-2 border-success-subtle shadow-sm p-3 mb-3 visually-hidden" tabindex="0" aria-live="polite">
            <div class="math-display text-center fs-4 mb-3"></div>
            <div class="explanation-box" style="margin-top:1rem;"></div>
                </div>
            </form>
    <form id="setRelationsForm" class="mb-4" autocomplete="off">
        <div class="row g-3 align-items-end">
            <div class="col-md-4">
                <label for="setD" class="form-label">Relation (list of pairs)</label>
                <input type="text" class="form-control" id="setD" name="setD" placeholder="e.g. (1,2),(2,3)" aria-label="Relation">
            </div>
            <div class="col-md-4">
                <label for="setE" class="form-label">Universe</label>
                <input type="text" class="form-control" id="setE" name="setE" placeholder="e.g. 1,2,3" aria-label="Universe for relation">
            </div>
        </div>
        <div class="d-flex flex-wrap gap-2 mt-3">
            <button type="button" class="btn btn-outline-info" data-relation="relation_reflexive">Reflexive?</button>
            <button type="button" class="btn btn-outline-info" data-relation="relation_symmetric">Symmetric?</button>
            <button type="button" class="btn btn-outline-info" data-relation="relation_antisymmetric">Antisymmetric?</button>
            <button type="button" class="btn btn-outline-info" data-relation="relation_transitive">Transitive?</button>
            <button type="button" class="btn btn-outline-info" data-relation="relation_inverse">Inverse</button>
            <button type="button" class="btn btn-outline-info" data-relation="relation_reflexive_closure">Reflexive Closure</button>
            <button type="button" class="btn btn-outline-info" data-relation="relation_symmetric_closure">Symmetric Closure</button>
            <button type="button" class="btn btn-outline-info" data-relation="relation_transitive_closure">Transitive Closure</button>
            <button type="button" class="btn btn-outline-secondary reset-btn" data-reset="setRelationsForm">Reset</button>
                </div>
                <div class="result-container card border-2 border-info-subtle shadow-sm p-3 mb-3 visually-hidden" tabindex="0" aria-live="polite">
                    <div class="math-display text-center fs-4 mb-3"></div>
            <div class="explanation-box" style="margin-top:1rem;"></div>
        </div>
    </form>
    <div id="setBatchPanel"></div>
    <div id="setHistoryPanel"></div>
</div>

<div id="toastContainer" class="fixed bottom-4 end-0 p-3 z-50"></div>
<script src="https://d3js.org/d3.v7.min.js"></script>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/set_theory.js') }}"></script>
{% endblock %}

<style>.explanation-box {background-color: var(--surface-100);border-radius: var(--radius-lg);padding: var(--space-4);margin-top: var(--space-4);}.explanation-box h4 {color: var(--primary-dark);margin-top: 0;margin-bottom: var(--space-2);}</style>

{% block extra_js %}
<script src="{{ url_for('static', filename='js/set_theory.js') }}"></script>
<noscript><div class="alert alert-danger">JavaScript is required for the Set Theory tab to function.</div></noscript>
{% endblock %}
